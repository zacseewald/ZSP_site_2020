{"ast":null,"code":"module.exports = exports = remove;\nexports.usage = 'Removes the node development files for the specified version';\n/**\n * Module dependencies.\n */\n\nvar fs = require('fs'),\n    rm = require('rimraf'),\n    path = require('path'),\n    log = require('npmlog'),\n    semver = require('semver');\n\nfunction remove(gyp, argv, callback) {\n  var devDir = gyp.devDir;\n  log.verbose('remove', 'using node-gyp dir:', devDir); // get the user-specified version to remove\n\n  var version = argv[0] || gyp.opts.target;\n  log.verbose('remove', 'removing target version:', version);\n\n  if (!version) {\n    return callback(new Error('You must specify a version number to remove. Ex: \"' + process.version + '\"'));\n  }\n\n  var versionSemver = semver.parse(version);\n\n  if (versionSemver) {\n    // flatten the version Array into a String\n    version = versionSemver.version;\n  }\n\n  var versionPath = path.resolve(gyp.devDir, version);\n  log.verbose('remove', 'removing development files for version:', version); // first check if its even installed\n\n  fs.stat(versionPath, function (err, stat) {\n    if (err) {\n      if (err.code == 'ENOENT') {\n        callback(null, 'version was already uninstalled: ' + version);\n      } else {\n        callback(err);\n      }\n\n      return;\n    } // Go ahead and delete the dir\n\n\n    rm(versionPath, callback);\n  });\n}","map":null,"metadata":{},"sourceType":"script"}